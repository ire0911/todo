<!DOCTYPE html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.2/firebase-app.js";
      import { getDatabase, ref, set, push, onValue, get, child} from "https://www.gstatic.com/firebasejs/9.9.2/firebase-database.js";

      const firebaseConfig = {
    apiKey: "AIzaSyCv6P0aPeEU-8IvUdCDsSXGw8lEE1A4LTI",
    authDomain: "project-2339726074035232043.firebaseapp.com",
    databaseURL: "https://project-2339726074035232043-default-rtdb.firebaseio.com",
    projectId: "project-2339726074035232043",
    storageBucket: "project-2339726074035232043.appspot.com",
    messagingSenderId: "15762287046",
    appId: "1:15762287046:web:77cc3a15cd62ea94f1aac7"
  };
    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app); 
    
    onValue(ref(database, '/'), (snapshot)=>{
        document.getElementById('div_list').innerHTML ="";
        snapshot.forEach((childSnapshot)=>{
            const phone = childSnapshot.key;
            const name = childSnapshot.val().name;
            const enterTime = childSnapshot.val().enterTime;

            const div = document.createElement('div');
            div.setAttribute('id',phone);
            document.getElementById('div_list').appendChild(div);

            const div1 = document.createElement('div');
            const div1text = document.createTextNode(name);
            div1.appendChild(div1text);
            document.getElementById(phone).appendChild(div1);

            const div2 = document.createElement('div');
            const div2text = document.createTextNode(phone);
            div2.appendChild(div2text);
            document.getElementById(phone).appendChild(div2);
            
            const div4 = document.createElement('div');
            const div4text = document.createTextNode(phone);
            div4.appendChild(div4text);
            document.getElementById(phone).appendChild(div4);

            let enterTimeText ="";
            if(enterTime){
                enterTimeText = "입장완료("+enterTime+")";

            }
            else{
                enterTimeText ="입장전"
            }

            const div3 = document.createElement('div');
            const div3text = document.createTextNode(enterTimeText);
            div3.appendChild(div3text);
            document.getElementById(phone).appendChild(div3);
            document.getElementById(phone).setAttribute( 'style', 'color:darkgrey;')

            const hr = document.createElement('hr');

        });
    });
    </script>

</head>
<body>
    <h1>송학초 음악제 참가 사전등록 현황</h1>
    <h2 style="color:darkgrey;">송학초 음악제 참가 사전등록 현황입니다.</h2>
    <div id="div_list"></div>
    <div class=""></div>
</body>
</html>
